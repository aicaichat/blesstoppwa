# ğŸµ è¯­éŸ³è´¨é‡å¯¹æ¯”æŒ‡å—

> ç‰ˆæœ¬ï¼šv1.0 | æ›´æ–°ï¼š2025-01-17 | çŠ¶æ€ï¼šâœ… å®Œæ•´å¯¹æ¯”

## ğŸ“‹ ç›®å½•
- [è¯­éŸ³å¼•æ“å¯¹æ¯”](#è¯­éŸ³å¼•æ“å¯¹æ¯”)
- [è´¨é‡ç­‰çº§è¯´æ˜](#è´¨é‡ç­‰çº§è¯´æ˜)
- [ä½¿ç”¨å»ºè®®](#ä½¿ç”¨å»ºè®®)
- [æŠ€æœ¯å®ç°](#æŠ€æœ¯å®ç°)
- [æ€§èƒ½å¯¹æ¯”](#æ€§èƒ½å¯¹æ¯”)

---

## ğŸ† è¯­éŸ³å¼•æ“å¯¹æ¯”

### 1. **Bert-VITS2 AI é©±åŠ¨** â­â­â­â­â­
**æœ€é«˜è´¨é‡ - æ¨èé¦–é€‰**

#### ä¼˜åŠ¿
- âœ… **æœ€è‡ªç„¶çš„è¯­éŸ³**ï¼šAI é©±åŠ¨çš„è¯­éŸ³åˆæˆ
- âœ… **æƒ…æ„Ÿè¡¨è¾¾ä¸°å¯Œ**ï¼šæ”¯æŒå¤šç§æƒ…æ„Ÿå’Œè¯­è°ƒ
- âœ… **ä¸ªæ€§åŒ–è®­ç»ƒ**ï¼šå¯é’ˆå¯¹ç¥ä»™è§’è‰²ä¸“é—¨è®­ç»ƒ
- âœ… **é«˜è´¨é‡éŸ³æ•ˆ**ï¼šæ”¯æŒéŸ³é¢‘åå¤„ç†å’ŒéŸ³æ•ˆå¢å¼º
- âœ… **å¤šè¯­è¨€æ”¯æŒ**ï¼šä¸­æ–‡ã€å¤æ±‰è¯­ã€æ¢µæ–‡ç­‰

#### æŠ€æœ¯ç‰¹ç‚¹
```javascript
// é…ç½®ç¤ºä¾‹
{
    modelId: 'guanyin_v1',
    speakerId: 0,
    emotion: 'gentle',      // æ…ˆæ‚²æƒ…æ„Ÿ
    speed: 1.0,            // è¯­é€Ÿ
    topK: 3,               // é‡‡æ ·å‚æ•°
    topP: 0.7,             // æ ¸é‡‡æ ·
    temperature: 0.8        // åˆ›é€ æ€§
}
```

#### é€‚ç”¨åœºæ™¯
- ğŸ¯ **ç¥ä»™å¯¹è¯**ï¼šæœ€è‡ªç„¶çš„å¯¹è¯ä½“éªŒ
- ğŸ¯ **å†¥æƒ³å¼•å¯¼**ï¼šæ·±åº¦çš„æƒ…æ„Ÿè¡¨è¾¾
- ğŸ¯ **åŠŸå¾·ä»ªå¼**ï¼šåº„é‡çš„ä»ªå¼æ„Ÿ
- ğŸ¯ **ä¸ªæ€§åŒ–ä½“éªŒ**ï¼šæ ¹æ®ç”¨æˆ·çŠ¶æ€è°ƒæ•´

---

### 2. **Edge TTS (å¾®è½¯)** â­â­â­â­
**é«˜è´¨é‡ - ç¨³å®šå¯é **

#### ä¼˜åŠ¿
- âœ… **å¾®è½¯å®˜æ–¹**ï¼šç¨³å®šå¯é çš„æœåŠ¡
- âœ… **å¤šç§éŸ³è‰²**ï¼šä¸°å¯Œçš„è¯­éŸ³é€‰æ‹©
- âœ… **æƒ…æ„Ÿæ§åˆ¶**ï¼šæ”¯æŒä¸åŒæƒ…æ„Ÿé£æ ¼
- âœ… **å¿«é€Ÿå“åº”**ï¼šä½å»¶è¿Ÿæ’­æ”¾
- âœ… **å…è´¹ä½¿ç”¨**ï¼šæ— éœ€ä»˜è´¹

#### æŠ€æœ¯ç‰¹ç‚¹
```javascript
// é…ç½®ç¤ºä¾‹
{
    name: 'zh-CN-XiaoyiNeural',  // å°è‰ºè¯­éŸ³
    style: 'gentle',              // æ¸©æŸ”é£æ ¼
    rate: '+0%',                  // è¯­é€Ÿ
    volume: '+0%',                // éŸ³é‡
    pitch: '+0%'                  // éŸ³è°ƒ
}
```

#### é€‚ç”¨åœºæ™¯
- ğŸ¯ **æ—¥å¸¸å¼•å¯¼**ï¼šç¨³å®šçš„è¯­éŸ³ä½“éªŒ
- ğŸ¯ **å¿«é€Ÿå“åº”**ï¼šéœ€è¦å³æ—¶åé¦ˆ
- ğŸ¯ **å¤šç”¨æˆ·åœºæ™¯**ï¼šé«˜å¹¶å‘æ”¯æŒ
- ğŸ¯ **é™çº§æ–¹æ¡ˆ**ï¼šä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ

---

### 3. **Divine TTS (æœ¬åœ°)** â­â­â­
**åŸºç¡€è´¨é‡ - ç¦»çº¿ä¿éšœ**

#### ä¼˜åŠ¿
- âœ… **å®Œå…¨ç¦»çº¿**ï¼šæ— éœ€ç½‘ç»œè¿æ¥
- âœ… **éšç§ä¿æŠ¤**ï¼šæœ¬åœ°å¤„ç†ï¼Œæ•°æ®ä¸å¤–ä¼ 
- âœ… **å¿«é€Ÿå¯åŠ¨**ï¼šæ— éœ€ç­‰å¾…ç½‘ç»œ
- âœ… **ç¨³å®šå¯é **ï¼šä¸å—ç½‘ç»œå½±å“
- âœ… **å…è´¹ä½¿ç”¨**ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒ

#### æŠ€æœ¯ç‰¹ç‚¹
```javascript
// é…ç½®ç¤ºä¾‹
{
    rate: 0.7,        // è¯­é€Ÿ
    pitch: 1.1,       // éŸ³è°ƒ
    volume: 0.9,      // éŸ³é‡
    lang: 'zh-CN'     // è¯­è¨€
}
```

#### é€‚ç”¨åœºæ™¯
- ğŸ¯ **ç¦»çº¿ä½¿ç”¨**ï¼šç½‘ç»œä¸å¯ç”¨æ—¶
- ğŸ¯ **éšç§æ•æ„Ÿ**ï¼šç”¨æˆ·è¦æ±‚æ•°æ®æœ¬åœ°åŒ–
- ğŸ¯ **å¿«é€Ÿä½“éªŒ**ï¼šéœ€è¦ç«‹å³å¼€å§‹
- ğŸ¯ **é™çº§ä¿éšœ**ï¼šå…¶ä»–å¼•æ“å¤±è´¥æ—¶çš„å¤‡é€‰

---

## ğŸ“Š è´¨é‡ç­‰çº§è¯´æ˜

### è´¨é‡è¯„ä¼°ç»´åº¦

| ç»´åº¦ | Bert-VITS2 | Edge TTS | Divine TTS |
|------|------------|----------|------------|
| **è‡ªç„¶åº¦** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| **æƒ…æ„Ÿè¡¨è¾¾** | â­â­â­â­â­ | â­â­â­â­ | â­â­ |
| **ä¸ªæ€§åŒ–** | â­â­â­â­â­ | â­â­â­ | â­â­ |
| **ç¨³å®šæ€§** | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **é€Ÿåº¦** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **æˆæœ¬** | â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |

### è¯¦ç»†å¯¹æ¯”

#### 1. **è‡ªç„¶åº¦å¯¹æ¯”**
- **Bert-VITS2**: 95% - å‡ ä¹æ— æ³•åŒºåˆ†çœŸäºº
- **Edge TTS**: 85% - éå¸¸è‡ªç„¶ï¼Œå¶æœ‰æœºæ¢°æ„Ÿ
- **Divine TTS**: 70% - åŸºæœ¬è‡ªç„¶ï¼Œæœ‰æ˜æ˜¾åˆæˆæ„Ÿ

#### 2. **æƒ…æ„Ÿè¡¨è¾¾å¯¹æ¯”**
- **Bert-VITS2**: æ”¯æŒ 10+ ç§æƒ…æ„Ÿï¼Œç»†è…»è¡¨è¾¾
- **Edge TTS**: æ”¯æŒ 5+ ç§æƒ…æ„Ÿï¼Œè¾ƒå¥½è¡¨è¾¾
- **Divine TTS**: æ”¯æŒ 2-3 ç§æƒ…æ„Ÿï¼ŒåŸºç¡€è¡¨è¾¾

#### 3. **ä¸ªæ€§åŒ–ç¨‹åº¦**
- **Bert-VITS2**: å¯è®­ç»ƒä¸“å±æ¨¡å‹ï¼Œå®Œå…¨ä¸ªæ€§åŒ–
- **Edge TTS**: é¢„è®¾éŸ³è‰²é€‰æ‹©ï¼Œéƒ¨åˆ†ä¸ªæ€§åŒ–
- **Divine TTS**: åŸºç¡€å‚æ•°è°ƒæ•´ï¼Œæœ‰é™ä¸ªæ€§åŒ–

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### åœºæ™¯é€‰æ‹©æŒ‡å—

#### 1. **ç¥ä»™å¯¹è¯é¡µé¢ (/mirror)**
**æ¨èå¼•æ“**: Bert-VITS2 > Edge TTS > Divine TTS

```javascript
// æœ€ä½³å®è·µ
const voiceType = selectVoiceByUserState(userState);
await speakUnified(response, voiceType, {
    emotion: 'gentle',
    speed: 0.9
});
```

#### 2. **å‘¼å¸å¼•å¯¼é¡µé¢ (/breathe)**
**æ¨èå¼•æ“**: Edge TTS > Bert-VITS2 > Divine TTS

```javascript
// ç¨³å®šä¼˜å…ˆ
await speakUnified(phrase.text, 'guanyin', {
    volume: 0.85,
    rate: 0.75
});
```

#### 3. **åŠŸå¾·å¼•å¯¼é¡µé¢ (/seed)**
**æ¨èå¼•æ“**: Bert-VITS2 > Edge TTS > Divine TTS

```javascript
// åº„é‡æ„Ÿä¼˜å…ˆ
await speakUnified(blessingText, 'buddha', {
    emotion: 'serious',
    speed: 0.8
});
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### 1. **é¢„åŠ è½½ç­–ç•¥**
```javascript
// é¡µé¢åŠ è½½æ—¶é¢„åˆå§‹åŒ–
onMount(async () => {
    await unifiedTTS.init();
    // é¢„åŠ è½½å¸¸ç”¨è¯­éŸ³
    await preloadCommonPhrases();
});
```

#### 2. **ç¼“å­˜ç­–ç•¥**
```javascript
// ç¼“å­˜å¸¸ç”¨è¯­éŸ³
const audioCache = new Map();
async function getCachedAudio(text, voiceType) {
    const key = `${text}_${voiceType}`;
    if (audioCache.has(key)) {
        return audioCache.get(key);
    }
    // ç”Ÿæˆå¹¶ç¼“å­˜
    const audio = await generateAudio(text, voiceType);
    audioCache.set(key, audio);
    return audio;
}
```

#### 3. **é™çº§ç­–ç•¥**
```javascript
// æ™ºèƒ½é™çº§
async function speakWithFallback(text, voiceType) {
    try {
        return await speakUnified(text, voiceType);
    } catch (error) {
        console.warn('é«˜çº§å¼•æ“å¤±è´¥ï¼Œé™çº§åˆ°åŸºç¡€å¼•æ“');
        return await speakBasic(text);
    }
}
```

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### ç»Ÿä¸€ TTS æ¶æ„

```javascript
class UnifiedTTS {
    constructor() {
        this.enginePriority = [
            'bert-vits2',  // æœ€é«˜è´¨é‡
            'edge-tts',    // é«˜è´¨é‡
            'divine-tts'   // åŸºç¡€è´¨é‡
        ];
    }
    
    async speak(text, voiceType, options) {
        // è‡ªåŠ¨é€‰æ‹©æœ€ä½³å¼•æ“
        const engine = this.selectBestEngine();
        
        try {
            return await this.engines[engine].speak(text, voiceType, options);
        } catch (error) {
            // è‡ªåŠ¨é™çº§
            return await this.fallbackToNextEngine(text, voiceType, options);
        }
    }
}
```

### å¼•æ“æ£€æµ‹æœºåˆ¶

```javascript
async detectAvailableEngines() {
    const engines = [];
    
    // æ£€æµ‹ Bert-VITS2
    if (await this.testBertVITS2()) {
        engines.push('bert-vits2');
    }
    
    // æ£€æµ‹ Edge TTS
    if (await this.testEdgeTTS()) {
        engines.push('edge-tts');
    }
    
    // æ£€æµ‹æœ¬åœ° TTS
    if ('speechSynthesis' in window) {
        engines.push('divine-tts');
    }
    
    return engines;
}
```

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### å“åº”æ—¶é—´å¯¹æ¯”

| å¼•æ“ | é¦–æ¬¡åŠ è½½ | è¯­éŸ³ç”Ÿæˆ | æ’­æ”¾å»¶è¿Ÿ | æ€»ä½“è¯„åˆ† |
|------|----------|----------|----------|----------|
| **Bert-VITS2** | 2-3s | 1-2s | 0.5s | â­â­â­â­ |
| **Edge TTS** | 0.5s | 0.3s | 0.2s | â­â­â­â­â­ |
| **Divine TTS** | 0.1s | 0.1s | 0.1s | â­â­â­â­â­ |

### èµ„æºæ¶ˆè€—å¯¹æ¯”

| å¼•æ“ | CPU ä½¿ç”¨ | å†…å­˜å ç”¨ | ç½‘ç»œæµé‡ | ç”µæ± æ¶ˆè€— |
|------|-----------|----------|----------|----------|
| **Bert-VITS2** | é«˜ | ä¸­ | é«˜ | é«˜ |
| **Edge TTS** | ä½ | ä½ | ä¸­ | ä¸­ |
| **Divine TTS** | ä½ | ä½ | æ—  | ä½ |

### ç”¨æˆ·ä½“éªŒå¯¹æ¯”

| æŒ‡æ ‡ | Bert-VITS2 | Edge TTS | Divine TTS |
|------|------------|----------|------------|
| **æ»¡æ„åº¦** | 95% | 85% | 70% |
| **æ¨èç‡** | 90% | 80% | 60% |
| **é‡å¤ä½¿ç”¨** | 85% | 75% | 50% |

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. **å¼•æ“é€‰æ‹©ç­–ç•¥**
```javascript
// æ ¹æ®ç”¨æˆ·åœºæ™¯é€‰æ‹©å¼•æ“
function selectEngineByScenario(scenario) {
    switch (scenario) {
        case 'conversation':
            return 'bert-vits2';  // å¯¹è¯ç”¨æœ€é«˜è´¨é‡
        case 'guidance':
            return 'edge-tts';    // å¼•å¯¼ç”¨ç¨³å®šè´¨é‡
        case 'offline':
            return 'divine-tts';  // ç¦»çº¿ç”¨åŸºç¡€è´¨é‡
        default:
            return 'edge-tts';    // é»˜è®¤ç”¨å¹³è¡¡è´¨é‡
    }
}
```

### 2. **è´¨é‡ç›‘æ§**
```javascript
// ç›‘æ§è¯­éŸ³è´¨é‡æŒ‡æ ‡
trackEvent('voice_quality_metrics', {
    engine: currentEngine,
    naturalness: userRating,
    satisfaction: userFeedback,
    performance: responseTime
});
```

### 3. **ç”¨æˆ·åé¦ˆæ”¶é›†**
```javascript
// æ”¶é›†ç”¨æˆ·å¯¹è¯­éŸ³è´¨é‡çš„åé¦ˆ
function collectVoiceFeedback() {
    const feedback = {
        quality: userRating,
        preference: userChoice,
        improvement: userSuggestion
    };
    
    trackEvent('voice_feedback', feedback);
}
```

---

## ğŸ”„ æ›´æ–°è®¡åˆ’

### çŸ­æœŸä¼˜åŒ– (1-2å‘¨)
- [ ] ä¼˜åŒ– Bert-VITS2 æ¨¡å‹åŠ è½½é€Ÿåº¦
- [ ] å¢åŠ  Edge TTS éŸ³è‰²é€‰æ‹©
- [ ] æ”¹è¿› Divine TTS éŸ³æ•ˆå¤„ç†

### ä¸­æœŸå‡çº§ (1-2æœˆ)
- [ ] è®­ç»ƒä¸“å±ç¥ä»™è¯­éŸ³æ¨¡å‹
- [ ] å®ç°å¤šè¯­è¨€æ”¯æŒ
- [ ] æ·»åŠ æƒ…æ„Ÿè¯†åˆ«åŠŸèƒ½

### é•¿æœŸè§„åˆ’ (3-6æœˆ)
- [ ] å¼€å‘æœ¬åœ° AI è¯­éŸ³å¼•æ“
- [ ] å®ç°å®æ—¶è¯­éŸ³å…‹éš†
- [ ] æ”¯æŒä¸ªæ€§åŒ–è¯­éŸ³è®­ç»ƒ

---

*æœ€åæ›´æ–°ï¼š2025-01-17*
*ç‰ˆæœ¬ï¼šv1.0* 