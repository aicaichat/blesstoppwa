import{s as ce,n as W,r as ie,e as Z,o as ue,h as de}from"../chunks/scheduler.c332f3f7.js";import{S as fe,i as he,g as m,s as D,m as J,x as ve,h as _,f as b,c as M,j as I,z as N,n as Q,k as h,y as f,a as A,E as $,A as S,B as pe,o as ae}from"../chunks/index.a647b513.js";import{e as ee}from"../chunks/each.e59479a4.js";import{t as G,u as te,g as be,m as me}from"../chunks/appState.b697c72e.js";function se(n,e,t){const s=n.slice();return s[21]=e[t],s}function _e(n){let e,t=n[21].content+"",s;return{c(){e=m("div"),s=J(t),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=I(e);s=Q(a,t),a.forEach(b),this.h()},h(){h(e,"class","chat-bubble user svelte-1yn5jcv")},m(r,a){A(r,e,a),f(e,s)},p(r,a){a&1&&t!==(t=r[21].content+"")&&ae(s,t)},d(r){r&&b(e)}}}function ge(n){let e,t,s="仙",r,a,v=n[21].content+"",o;return{c(){e=m("div"),t=m("div"),t.textContent=s,r=D(),a=m("div"),o=J(v),this.h()},l(i){e=_(i,"DIV",{class:!0});var c=I(e);t=_(c,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-rxar82"&&(t.textContent=s),r=M(c),a=_(c,"DIV",{class:!0});var u=I(a);o=Q(u,v),u.forEach(b),c.forEach(b),this.h()},h(){h(t,"class","w-10 h-10 rounded-full bg-gradient-to-br from-yellow-600 to-yellow-400 flex items-center justify-center text-black font-bold"),h(a,"class","chat-bubble ai svelte-1yn5jcv"),h(e,"class","flex items-start gap-3")},m(i,c){A(i,e,c),f(e,t),f(e,r),f(e,a),f(a,o)},p(i,c){c&1&&v!==(v=i[21].content+"")&&ae(o,v)},d(i){i&&b(e)}}}function le(n){let e,t,s,r;function a(i,c){return i[21].role==="assistant"?ge:_e}let v=a(n),o=v(n);return{c(){e=m("div"),t=m("div"),o.c(),s=D(),this.h()},l(i){e=_(i,"DIV",{class:!0});var c=I(e);t=_(c,"DIV",{class:!0});var u=I(t);o.l(u),u.forEach(b),s=M(c),c.forEach(b),this.h()},h(){h(t,"class","max-w-xs md:max-w-md"),h(e,"class",r="flex "+(n[21].role==="user"?"justify-end":"justify-start"))},m(i,c){A(i,e,c),f(e,t),o.m(t,null),f(e,s)},p(i,c){v===(v=a(i))&&o?o.p(i,c):(o.d(1),o=v(i),o&&(o.c(),o.m(t,null))),c&1&&r!==(r="flex "+(i[21].role==="user"?"justify-end":"justify-start"))&&h(e,"class",r)},d(i){i&&b(e),o.d()}}}function oe(n){let e,t='<div class="flex items-start gap-3"><div class="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-600 to-yellow-400 flex items-center justify-center text-black font-bold">仙</div> <div class="chat-bubble ai svelte-1yn5jcv"><div class="typing-indicator svelte-1yn5jcv"><span class="svelte-1yn5jcv"></span> <span class="svelte-1yn5jcv"></span> <span class="svelte-1yn5jcv"></span></div></div></div>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(s){e=_(s,"DIV",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1jjk30e"&&(e.innerHTML=t),this.h()},h(){h(e,"class","flex justify-start")},m(s,r){A(s,e,r)},d(s){s&&b(e)}}}function ne(n){let e,t,s="感觉好多了",r,a,v="还是有些焦虑",o,i,c="想要人生指导",u,w;return{c(){e=m("div"),t=m("button"),t.textContent=s,r=D(),a=m("button"),a.textContent=v,o=D(),i=m("button"),i.textContent=c,this.h()},l(k){e=_(k,"DIV",{class:!0});var j=I(e);t=_(j,"BUTTON",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-x4u6xc"&&(t.textContent=s),r=M(j),a=_(j,"BUTTON",{class:!0,"data-svelte-h":!0}),N(a)!=="svelte-1otxqgp"&&(a.textContent=v),o=M(j),i=_(j,"BUTTON",{class:!0,"data-svelte-h":!0}),N(i)!=="svelte-18oipzt"&&(i.textContent=c),j.forEach(b),this.h()},h(){h(t,"class","px-3 py-1 text-sm bg-yellow-600/20 text-yellow-300 border border-yellow-500/30 rounded-full hover:bg-yellow-600/30 transition-colors"),h(a,"class","px-3 py-1 text-sm bg-yellow-600/20 text-yellow-300 border border-yellow-500/30 rounded-full hover:bg-yellow-600/30 transition-colors"),h(i,"class","px-3 py-1 text-sm bg-yellow-600/20 text-yellow-300 border border-yellow-500/30 rounded-full hover:bg-yellow-600/30 transition-colors"),h(e,"class","mt-3 flex flex-wrap gap-2")},m(k,j){A(k,e,j),f(e,t),f(e,r),f(e,a),f(e,o),f(e,i),u||(w=[S(t,"click",n[11]),S(a,"click",n[12]),S(i,"click",n[13])],u=!0)},p:W,d(k){k&&b(e),u=!1,ie(w)}}}function re(n){let e,t,s="继续体验 →",r,a;return{c(){e=m("div"),t=m("button"),t.textContent=s,this.h()},l(v){e=_(v,"DIV",{class:!0});var o=I(e);t=_(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-ovie40"&&(t.textContent=s),o.forEach(b),this.h()},h(){h(t,"class","px-8 py-3 bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-semibold rounded-xl hover:from-yellow-500 hover:to-yellow-400 transition-all duration-300"),h(e,"class","mt-4 text-center")},m(v,o){A(v,e,o),f(e,t),r||(a=S(t,"click",n[6]),r=!0)},p:W,d(v){v&&b(e),r=!1,a()}}}function ye(n){let e,t,s,r,a='<div class="text-center"><h1 class="text-2xl font-bold gradient-text svelte-1yn5jcv">心音 · 沉香之灵</h1> <p class="text-yellow-200 text-sm mt-1">千年古寺开光加持</p></div>',v,o,i,c,u,w,k,j="🎤",H,T,z,E,q,L,K,U,P,X,V=ee(n[0]),l=[];for(let d=0;d<V.length;d+=1)l[d]=le(se(n,V,d));let g=n[2]&&oe(),y=n[0].length===1&&ne(n),x=n[0].length>=3&&re(n);return{c(){e=m("meta"),t=D(),s=m("div"),r=m("div"),r.innerHTML=a,v=D(),o=m("div");for(let d=0;d<l.length;d+=1)l[d].c();i=D(),g&&g.c(),c=D(),u=m("div"),w=m("div"),k=m("button"),k.textContent=j,H=D(),T=m("textarea"),z=D(),E=m("button"),q=J("发送"),K=D(),y&&y.c(),U=D(),x&&x.c(),this.h()},l(d){const C=ve("svelte-1sfmrn5",document.head);e=_(C,"META",{name:!0,content:!0}),C.forEach(b),t=M(d),s=_(d,"DIV",{class:!0});var p=I(s);r=_(p,"DIV",{class:!0,"data-svelte-h":!0}),N(r)!=="svelte-4kycxk"&&(r.innerHTML=a),v=M(p),o=_(p,"DIV",{class:!0});var B=I(o);for(let F=0;F<l.length;F+=1)l[F].l(B);i=M(B),g&&g.l(B),B.forEach(b),c=M(p),u=_(p,"DIV",{class:!0});var O=I(u);w=_(O,"DIV",{class:!0});var R=I(w);k=_(R,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),N(k)!=="svelte-t6owl1"&&(k.textContent=j),H=M(R),T=_(R,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),I(T).forEach(b),z=M(R),E=_(R,"BUTTON",{class:!0});var Y=I(E);q=Q(Y,"发送"),Y.forEach(b),R.forEach(b),K=M(O),y&&y.l(O),U=M(O),x&&x.l(O),O.forEach(b),p.forEach(b),this.h()},h(){document.title="对话神仙 - 交个神仙朋友",h(e,"name","description"),h(e,"content","与AI神仙伴侣深度对话，获得人生指导"),h(r,"class","flex-shrink-0 p-4 border-b border-yellow-500/30 backdrop-blur-sm"),h(o,"class","flex-1 overflow-y-auto p-4 space-y-4"),h(k,"class","flex-shrink-0 w-12 h-12 bg-yellow-600 hover:bg-yellow-500 text-black rounded-full flex items-center justify-center transition-colors"),h(k,"title","语音输入"),h(T,"placeholder","向神仙倾诉您的困扰..."),h(T,"class","flex-1 resize-none rounded-xl border border-yellow-500/50 bg-black/50 text-yellow-100 placeholder-yellow-500/50 p-3 focus:border-yellow-500 focus:outline-none"),h(T,"rows","1"),E.disabled=L=!n[1].trim(),h(E,"class","flex-shrink-0 px-6 py-3 bg-yellow-600 hover:bg-yellow-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-black font-semibold rounded-xl transition-colors"),h(w,"class","flex gap-2"),h(u,"class","flex-shrink-0 p-4 border-t border-yellow-500/30 backdrop-blur-sm"),h(s,"class","min-h-screen flex flex-col")},m(d,C){f(document.head,e),A(d,t,C),A(d,s,C),f(s,r),f(s,v),f(s,o);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(o,null);f(o,i),g&&g.m(o,null),f(s,c),f(s,u),f(u,w),f(w,k),f(w,H),f(w,T),$(T,n[1]),f(w,z),f(w,E),f(E,q),f(u,K),y&&y.m(u,null),f(u,U),x&&x.m(u,null),P||(X=[S(k,"click",n[7]),S(T,"input",n[10]),S(T,"keydown",n[5]),S(E,"click",n[4])],P=!0)},p(d,[C]){if(C&1){V=ee(d[0]);let p;for(p=0;p<V.length;p+=1){const B=se(d,V,p);l[p]?l[p].p(B,C):(l[p]=le(B),l[p].c(),l[p].m(o,i))}for(;p<l.length;p+=1)l[p].d(1);l.length=V.length}d[2]?g||(g=oe(),g.c(),g.m(o,null)):g&&(g.d(1),g=null),C&2&&$(T,d[1]),C&2&&L!==(L=!d[1].trim())&&(E.disabled=L),d[0].length===1?y?y.p(d,C):(y=ne(d),y.c(),y.m(u,U)):y&&(y.d(1),y=null),d[0].length>=3?x?x.p(d,C):(x=re(d),x.c(),x.m(u,null)):x&&(x.d(1),x=null)},i:W,o:W,d(d){d&&(b(t),b(s)),b(e),pe(l,d),g&&g.d(),y&&y.d(),x&&x.d(),P=!1,ie(X)}}}function xe(n,e,t){let s,r,a=W,v=()=>(a(),a=de(s,l=>t(15,r=l)),s),o,i;Z(n,te,l=>t(8,o=l)),Z(n,me,l=>t(9,i=l)),n.$$.on_destroy.push(()=>a());let c=[],u="",w=!1;const k=[{trigger:["你好","您好","问候","打招呼"],responses:["施主，我是心音，千年沉香之灵。你的心灵刚刚得到了净化，感受如何？","阿弥陀佛，施主。我感受到你内心的变化，平静之力正在生长。","善哉，施主。我是这枚沉香的守护之灵，有何困扰可与我分享？"]},{trigger:["焦虑","担心","害怕","恐惧","紧张"],responses:["心如止水，方能照见真相。焦虑如云，终将散去。","一切皆是无常，包括你的烦恼。深呼吸，让它随风而逝。","执着生苦，放下即得自在。试着接纳此刻的感受吧。"]},{trigger:["困惑","迷茫","不知道","选择","决定"],responses:["答案早已在你心中，静心倾听内在的声音。","山重水复疑无路，柳暗花明又一村。相信自己的智慧。","当下即是道场，每个选择都是修行的机会。"]},{trigger:["感谢","谢谢","好的","明白"],responses:["无需言谢，助人为乐是我的本分。愿你常怀慈悲喜舍之心。","善缘相聚，皆是因果。愿你在人生路上常有贵人相助。","功德回向，众生安乐。记得将这份平静传递给他人。"]}];ue(()=>{G("page_view",{page:"mirror"}),setTimeout(()=>{T(j())},1e3)});function j(){const l=r.calmScore||70;return l>=80?"善哉！我感受到你内心的宁静，效果十分理想。有什么想与我分享的吗？":l>=65?"不错，你的心境已有所改善。还有什么困扰需要化解吗？":"我感受到你内心仍有波澜，让我们一起寻找内心的平静吧。"}function H(l){t(0,c=[...c,{role:"user",content:l,timestamp:Date.now()}]),t(1,u=""),setTimeout(()=>{z(l)},1e3+Math.random()*1e3)}function T(l){t(2,w=!0),setTimeout(()=>{t(0,c=[...c,{role:"assistant",content:l,timestamp:Date.now()}]),t(2,w=!1)},1500)}function z(l){const g=l.toLowerCase();for(const d of k)if(d.trigger.some(C=>g.includes(C))){const C=d.responses[Math.floor(Math.random()*d.responses.length)];T(C);return}const y=["凡所有相，皆是虚妄。说说你的具体困扰，我来为你指点迷津。","心有千千结，不如一念放下。详细说说吧，施主。","生命如流水，问题如磐石。让我们一起寻找解决之道。"],x=y[Math.floor(Math.random()*y.length)];T(x)}function E(){u.trim()&&(G("mirror_message_sent",{messageLength:u.length,chatLength:c.length}),H(u))}function q(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),E())}function L(){te.update(l=>({...l,chatHistory:c})),G("mirror_continue",{messageCount:c.length}),be("/share")}function K(){if("webkitSpeechRecognition"in window){const l=new webkitSpeechRecognition;l.lang="zh-CN",l.onresult=g=>{t(1,u=g.results[0][0].transcript)},l.start()}else alert("您的浏览器不支持语音输入")}function U(){u=this.value,t(1,u)}const P=()=>{t(1,u="我感觉好多了"),E()},X=()=>{t(1,u="还是有些焦虑"),E()},V=()=>{t(1,u="想要人生指导"),E()};return n.$$.update=()=>{n.$$.dirty&512,n.$$.dirty&256&&v(t(3,s=o))},[c,u,w,s,E,q,L,K,o,i,U,P,X,V]}class Ee extends fe{constructor(e){super(),he(this,e,xe,ye,ce,{})}}export{Ee as component};
